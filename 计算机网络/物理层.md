### 0x00 基本概念

#### 0x00 信息的交互方式

* 单工通信：只有一个方向的通信而没有反方向的交互，**仅需要一条信道**
* 半双工通信：通信双方都可以发送或接受消息，但**任何一方都不能同时发送和接收**，需要2条信道
* 全双工通信：通信双方可以同时发送和接收信息，需要2条信道

信源是产生和发送数据的源头，信宿是接受数据的终点，信道是信号的传输媒介。

> 注：信道**不等同于电路**！一条电路可包含多个信道。

把数据变换为模拟信号的过程叫**调制**，把数据变换为数字信号的过程叫**编码**。

波特率（码元传输速率）即为**每秒传输的码元的个数（可能发生的信号变化次数）**。比特率（信息传输速率）即为**每秒传输的二进制码元的个数**。要注意两者不同，波特率是**每秒码元**的个数，比特率是**每秒二进制码元**的个数。

故又有：波特率=比特率/每符号所含的比特数。

传输：

* 基带传输：将基带信号**直接传送到**通信线路（**数字信道**）上
* 频带传输：将基带信号**经过调制后传送到**通信线路（**模拟信道**）上

在计算机内部一般使用**并行传输**。

#### 0x01 编码

* 非归零码NRZ：用低电平表示0高电平表示1，容易实现但**没有检错功能**，**无法判断一个码元的开始和结束，收发双方难以同步**
* 曼彻斯特编码：一个码元分为2个相等的间隔，**前高后低表示1**，**以太网使用的编码方式就是曼彻斯特编码**，每一个码元中间会出现电平跳变，位于中间的跳变可以用作**时钟信号（用于同步）**
* 差分曼彻斯特编码：用于**局域网传输**，前半个码元和和上一个码元的后半个码元的电平相同则为1，可以**实现自同步**且**抗干扰性好**

#### 0x02 数字信号与模拟信号转换

数字数据调制为模拟信号：

* **幅移键控（ASK）**
* **频移键控（FSK）**
* **相移键控（PSK）**
* **正交振幅调制（QAM）**

模拟数据编码为数字信号：

* **脉码调制（PCM）**：全称脉冲编码调制，常用于对**音频信号**进行编码

#### 0x03 交换

* 电路交换：**通信时延小**，**有序传输**，没有冲突，使用范围广，实时性强（可随时通信），控制简单，但需要**独占线路**，灵活性差（任何一点出现问题都要重新建立连接），难以规格化，电路交换建立连接后直接传输数据**不需要进行分组**
* 报文交换：无需建立连接，动态分配线路，提高可靠性和利用率，提供多目标服务，但转发**时延高**，需要有较大的缓存空间，**早期电报的通信方式**
* 分组交换：无建立时延，线路利用率高，**加速了传输减少了传输时延（相对于报文交换）**，减少了出错和重发数据量，但存在传输时延且需传输额外的信息量，可能出现失序、丢失和重复分组，尤其适用于**突发式的数据通信**

**以太网使用的是分组交换技术**。

数据量大，传送时间远大于呼叫时间，则电路交换

端到端的通路有很多链路组成，则分组交换

从提升整个网络的信道利用率来看，则报文交换

为了使**传输时延最小**，首选的方式是**电路交换**，但是**电路交换不具备差错控制能力**，所以电路交换不能保证传输的数据无差错。在**出错率很高的系统中**，使用**数据报方式**最合适。因为虚电路交换每次错误都需要重新建立虚电路，在经常出错的系统中，不断地建立变换虚电路需要耗费大量的时间。

其中**分组交换**依据其**通信子网向端点系统提供的服务**还可以分为如下2种：

|                  | 数据报                                                       | 虚电路                                       |
| ---------------- | ------------------------------------------------------------ | -------------------------------------------- |
| 建立连接         | 无                                                           | 必须                                         |
| 目的地址         | **每个分组都有完整的源地址和目的地址**                       | 仅建立连接时有之后仅有虚电路号               |
| 路由选择         | **每个分组独立进行**                                         | 同一条虚电路的分组**按同一条路由**           |
| 分组顺序         | **不保证有序到达**                                           | **保证有序到达**                             |
| 可靠性           | **不提供可靠性保障**，可靠性由**用户主机**来保证             | **提供可靠性保障**，可靠性由**网络**来保证   |
| 故障适应         | 出故障的结点丢失分组，**其他分组**路径选择发生变化，**可正常传输** | **所有经过**故障结点的虚电路**不能正常工作** |
| 差错处理流量控制 | 由用户主机进行流量控制，不保证数据报的可靠性                 | 可由分组交换网负责，也可由用户主机负责       |

* 虚电路的通信过程分为3个阶段：虚电路建立、数据传输和虚电路释放
* 虚电路又分为**永久性虚电路（PVC）**和**交换性虚电路（SVC）**，只有**交换性虚电路是一种临时性的连接**，也只有交换性虚电路会在会话结束后取消这种连接。
* **数据报服务每个分组都必须携带源地址和目的地址**，而**虚电路**中，当电路建立好了以后，**分组只需要携带虚电路标识**，不必带有源地址和目的地址
* **电路交换是真正的物理线路交换**，虚电路使用**多路复用技术**，每条物理线路可以进行多条连接。

### 0x01 传输介质

介质：

* 双绞线：主要用于局域网和电话网，带宽取决于铜线的粗细和传输的距离，模拟传输和数字传输都可以使用，距离太远时，对模拟传输要使用放大器放大信号，对数字传输要使用中继器将失真的信号整形，双绞线里面两根线绞合的原因是：**减少对相邻到导线的电磁干扰**
* 同轴电缆：主要用于有线电视，**具有良好的抗干扰性**，用于传输较高速率的数据
* 光纤
  * 单模光纤：光源为定向性好的激光二极管，适合远距离传输
  * 多模光纤：光源为发光二极管，适合近距离传输，原理是**光的全反射特性**

> 注：
>
> **光纤不受电磁干扰，无串音干扰，无噪声影响**。
>
> 使用**同轴电缆**构成的以太网只能采用**半双工通信模式**。

接口的特性：

* 机械特性：就是引线的数目或者引脚的排列等等
* 电气特性：电压高低、阻抗匹配、传输速率和距离限制
* 功能特性：出现某种电平意味着什么，里面各信号线的用途
* **规（过）程特性**：物理线路工作规程和**时序关系**

### 0x02 物理层设备

* 中继器（转发器）：将信号放大整形再转发出去（注意是整形而不是放大，中继器实质上是将衰减了的信号再生，使之恢复到发送时的状态），**互相串联的中继器的个数不能超过4个**。连接后的网段仍处于一个局域网。
* 集线器：实质为一个多端口的中继器

> 注：
>
> 放大器放大的是模拟信号，**中继器放大的是数字信号**。
>
> 中继器通常只有2个端口，而集线器通常由4个或更多端口。

### 0x0 涉及计算

比特率与波特率：
$$
比特率=波特率\times \log_2n \\
其中n为码元的进制数，比如二进制就是n=2 \\
比特率又称信息传输速率 \\
在以太网的曼彻斯特编码中，2个\text{bit}代表了一个数据
$$
奈奎斯特定理和香农定理：
$$
理想低通信道下极限数据传输率=2W\log_2V \\
其中W为带宽，单位为\text{Hz} \\
V就是有几种不同的用来表示数据的物理状态 \\
信道的极限数据传输速率=W\log_2(1+\frac{S}{N}) \\
其中W为带宽，单位为\text{Hz} \\
信噪比=10\log_{10}\frac{S}{N}，单位为\text{dB} \\
如果发现题目询问的最大数据传输率给出了码元与比特数之间的关系\\
那就用两个定理都计算一遍，然后取最小值\\
比如题目提示你这是一个二进制信号（V=2）
$$
奈奎斯特定理计算的是无噪声的情况下，香农定理计算的是有噪声的情况下

**比特率（数据传输率）的单位是bps是bits/sec，位每秒**，而不是Bps（Bytes/sec），这点一定要注意，1Bps=8bps，因为1byte=8bit，同样由此区分MB和Mb。

如果不采用分组的话，从主机A传送到主机B，**发送时延和接受时延是相同的**，就比如使用10Mbps的链路不分组传送8Mb的数据，那么就需要$2\times\frac{8}{10}=1.6$秒的时间，因为**发送时延和接受时延是相同的**。分组后当收到一个分组时发送端还在发送另一个分组，所以就不用乘以2，但是**要注意计算最后一个分组出发后到达信宿所花费的时间**，因为最后一个分组发出之后，发送端便停止了发送，只有接收端还有一个接受时延要单独计算在内。